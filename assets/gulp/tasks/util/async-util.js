/**
 * Gulp utils for async utils.
 */
const display = require("./display");
const util = require("util");
const fs = require("fs");

function stream (gulpStream, storeMethod) {
    return new Promise((resolve, reject) => {
        gulpStream.on("error", reject);
        gulpStream.on("end", resolve);
        if (storeMethod) {
            storeMethod(resolve, reject);
        }
    });
}

async function fileExists (filename) {
    try {
        const stat = await util.promisify(fs.stat)(filename);
        return stat.isFile();
    } catch (err) {
        if (err.code !== "ENOENT") {
            display.error(`Error accessing '${filename}`, err);
            process.exit(1);
        }
        return false;
    }
}

module.exports = {
    stream,
    fileExists
};

/* Generated by UniteJS */
