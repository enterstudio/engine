"use strict";
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
Object.defineProperty(exports, "__esModule", { value: true });
/**
 * Tests for EngineVariables.
 */
const Chai = require("chai");
const uniteConfiguration_1 = require("../../../../dist/configuration/models/unite/uniteConfiguration");
const engineVariables_1 = require("../../../../dist/engine/engineVariables");
describe("EngineVariables", () => {
    let uniteConfiguration;
    let packageJsonDependencies;
    let packageJsonDevDependencies;
    let peerDependencies;
    beforeEach(() => {
        uniteConfiguration = new uniteConfiguration_1.UniteConfiguration();
        uniteConfiguration.clientPackages = {};
        packageJsonDependencies = {};
        packageJsonDevDependencies = {};
        peerDependencies = {};
    });
    it("can be created", () => __awaiter(this, void 0, void 0, function* () {
        const obj = new engineVariables_1.EngineVariables();
        Chai.should().exist(obj);
    }));
    describe("toggleClientPackage", () => {
        it("can fail when there are no peer dependencies", () => __awaiter(this, void 0, void 0, function* () {
            const obj = new engineVariables_1.EngineVariables();
            try {
                obj.toggleClientPackage("package", "main.js", "main.min.js", false, "app", false, undefined, true);
            }
            catch (err) {
                Chai.expect(err.message).to.contain("missing");
            }
        }));
        it("can fail when peer dependencies does not contain package", () => __awaiter(this, void 0, void 0, function* () {
            const obj = new engineVariables_1.EngineVariables();
            obj.enginePackageJson = { peerDependencies };
            try {
                obj.toggleClientPackage("package", "main.js", "main.min.js", false, "app", false, undefined, true);
            }
            catch (err) {
                Chai.expect(err.message).to.contain("Missing");
            }
        }));
        it("can get added as a dependency contain package", () => __awaiter(this, void 0, void 0, function* () {
            const obj = new engineVariables_1.EngineVariables();
            peerDependencies.package = "^1.2.3";
            obj.enginePackageJson = { peerDependencies };
            obj.toggleClientPackage("package", "main.js", "main.min.js", false, "app", false, "**/*.css", true);
            obj.buildDependencies(uniteConfiguration, packageJsonDependencies);
            Chai.should().exist(uniteConfiguration.clientPackages.package);
            Chai.should().exist(packageJsonDependencies.package);
            Chai.expect(uniteConfiguration.clientPackages.package.main).to.be.equal("main.js");
            Chai.expect(uniteConfiguration.clientPackages.package.mainMinified).to.be.equal("main.min.js");
            Chai.expect(uniteConfiguration.clientPackages.package.includeMode).to.be.equal("app");
            Chai.expect(uniteConfiguration.clientPackages.package.version).to.be.equal("^1.2.3");
            Chai.expect(uniteConfiguration.clientPackages.package.preload).to.be.equal(false);
            Chai.expect(uniteConfiguration.clientPackages.package.isPackage).to.be.equal(false);
            Chai.expect(uniteConfiguration.clientPackages.package.assets).to.be.equal("**/*.css");
            obj.buildDevDependencies(packageJsonDevDependencies);
            Chai.should().not.exist(packageJsonDevDependencies.package);
        }));
        it("can get removed as a dependency contain package", () => __awaiter(this, void 0, void 0, function* () {
            const obj = new engineVariables_1.EngineVariables();
            peerDependencies.package = "^1.2.3";
            obj.enginePackageJson = { peerDependencies };
            obj.toggleClientPackage("package", "main.js", "main.min.js", false, "app", false, "**/*.css", false);
            obj.buildDependencies(uniteConfiguration, packageJsonDependencies);
            Chai.should().not.exist(uniteConfiguration.clientPackages.package);
            Chai.should().not.exist(packageJsonDependencies.package);
        }));
        it("can get added and removed as a dependency contain package", () => __awaiter(this, void 0, void 0, function* () {
            const obj = new engineVariables_1.EngineVariables();
            peerDependencies.package = "^1.2.3";
            obj.enginePackageJson = { peerDependencies };
            obj.toggleClientPackage("package", "main.js", "main.min.js", false, "app", false, "**/*.css", true);
            obj.toggleClientPackage("package", "main.js", "main.min.js", false, "app", false, "**/*.css", false);
            obj.buildDependencies(uniteConfiguration, packageJsonDependencies);
            Chai.should().exist(uniteConfiguration.clientPackages.package);
            Chai.should().exist(packageJsonDependencies.package);
            Chai.expect(uniteConfiguration.clientPackages.package.main).to.be.equal("main.js");
            Chai.expect(uniteConfiguration.clientPackages.package.mainMinified).to.be.equal("main.min.js");
            Chai.expect(uniteConfiguration.clientPackages.package.includeMode).to.be.equal("app");
            Chai.expect(uniteConfiguration.clientPackages.package.version).to.be.equal("^1.2.3");
            Chai.expect(uniteConfiguration.clientPackages.package.preload).to.be.equal(false);
            Chai.expect(uniteConfiguration.clientPackages.package.isPackage).to.be.equal(false);
            Chai.expect(uniteConfiguration.clientPackages.package.assets).to.be.equal("**/*.css");
            obj.buildDevDependencies(packageJsonDevDependencies);
            Chai.should().not.exist(packageJsonDevDependencies.package);
        }));
    });
    describe("getTestClientPackages", () => {
        it("can succeed when there are no test client packages", () => __awaiter(this, void 0, void 0, function* () {
            const obj = new engineVariables_1.EngineVariables();
            const packages = obj.getTestClientPackages();
            Chai.expect(Object.keys(packages).length).to.be.equal(0);
        }));
        it("can succeed when app packages have been added", () => __awaiter(this, void 0, void 0, function* () {
            const obj = new engineVariables_1.EngineVariables();
            obj.enginePackageJson = { peerDependencies };
            peerDependencies.package = "^1.2.3";
            obj.toggleClientPackage("package", "main.js", "main.min.js", false, "app", false, "**/*.css", true);
            const packages = obj.getTestClientPackages();
            Chai.expect(Object.keys(packages).length).to.be.equal(0);
        }));
        it("can succeed when test packages have been added", () => __awaiter(this, void 0, void 0, function* () {
            const obj = new engineVariables_1.EngineVariables();
            obj.enginePackageJson = { peerDependencies };
            peerDependencies.package = "^1.2.3";
            obj.toggleClientPackage("package", "main.js", "main.min.js", false, "test", false, "**/*.css", true);
            const packages = obj.getTestClientPackages();
            Chai.expect(Object.keys(packages).length).to.be.equal(1);
        }));
        it("can succeed when both packages have been added", () => __awaiter(this, void 0, void 0, function* () {
            const obj = new engineVariables_1.EngineVariables();
            obj.enginePackageJson = { peerDependencies };
            peerDependencies.package = "^1.2.3";
            obj.toggleClientPackage("package", "main.js", "main.min.js", false, "both", false, "**/*.css", true);
            const packages = obj.getTestClientPackages();
            Chai.expect(Object.keys(packages).length).to.be.equal(1);
        }));
    });
    describe("toggleDevDependency", () => {
        it("can fail when there are no peer dependencies", () => __awaiter(this, void 0, void 0, function* () {
            const obj = new engineVariables_1.EngineVariables();
            try {
                obj.toggleDevDependency(["package"], true);
            }
            catch (err) {
                Chai.expect(err.message).to.contain("missing");
            }
        }));
        it("can fail when peer dependencies does not contain package", () => __awaiter(this, void 0, void 0, function* () {
            const obj = new engineVariables_1.EngineVariables();
            obj.enginePackageJson = { peerDependencies };
            try {
                obj.toggleDevDependency(["package"], true);
            }
            catch (err) {
                Chai.expect(err.message).to.contain("Missing");
            }
        }));
        it("can succeed when adding a dev dependency", () => __awaiter(this, void 0, void 0, function* () {
            const obj = new engineVariables_1.EngineVariables();
            peerDependencies.package = "^1.2.3";
            obj.enginePackageJson = { peerDependencies };
            obj.toggleDevDependency(["package"], true);
            obj.buildDevDependencies(packageJsonDevDependencies);
            Chai.should().exist(packageJsonDevDependencies.package);
            obj.buildDependencies(uniteConfiguration, packageJsonDependencies);
            Chai.should().not.exist(uniteConfiguration.clientPackages.package);
            Chai.should().not.exist(packageJsonDependencies.package);
        }));
        it("can succeed when adding a dev dependency twice", () => __awaiter(this, void 0, void 0, function* () {
            const obj = new engineVariables_1.EngineVariables();
            peerDependencies.package = "^1.2.3";
            obj.enginePackageJson = { peerDependencies };
            obj.toggleDevDependency(["package"], true);
            obj.toggleDevDependency(["package"], true);
            obj.buildDevDependencies(packageJsonDevDependencies);
            Chai.should().exist(packageJsonDevDependencies.package);
            obj.buildDependencies(uniteConfiguration, packageJsonDependencies);
            Chai.should().not.exist(uniteConfiguration.clientPackages.package);
            Chai.should().not.exist(packageJsonDependencies.package);
        }));
        it("can succeed when removing a dev dependency", () => __awaiter(this, void 0, void 0, function* () {
            const obj = new engineVariables_1.EngineVariables();
            peerDependencies.package = "^1.2.3";
            obj.enginePackageJson = { peerDependencies };
            obj.toggleDevDependency(["package"], false);
            obj.buildDevDependencies(packageJsonDevDependencies);
            Chai.should().not.exist(packageJsonDevDependencies.package);
            obj.buildDependencies(uniteConfiguration, packageJsonDependencies);
            Chai.should().not.exist(uniteConfiguration.clientPackages.package);
            Chai.should().not.exist(packageJsonDependencies.package);
        }));
    });
    describe("buildDependencies", () => {
        it("can get removed from existing dependencies", () => __awaiter(this, void 0, void 0, function* () {
            const obj = new engineVariables_1.EngineVariables();
            peerDependencies.package = "^1.2.3";
            obj.enginePackageJson = { peerDependencies };
            obj.toggleClientPackage("package", "main.js", "main.min.js", false, "app", false, "**/*.css", false);
            packageJsonDependencies.package = "blah";
            obj.buildDependencies(uniteConfiguration, packageJsonDependencies);
            Chai.should().not.exist(packageJsonDependencies.package);
        }));
        it("can get added as a app package", () => __awaiter(this, void 0, void 0, function* () {
            const obj = new engineVariables_1.EngineVariables();
            peerDependencies.package = "^1.2.3";
            obj.enginePackageJson = { peerDependencies };
            obj.toggleClientPackage("package", "main.js", "main.min.js", false, "app", false, "**/*.css", true);
            obj.buildDependencies(uniteConfiguration, packageJsonDependencies);
            Chai.should().exist(uniteConfiguration.clientPackages.package);
            Chai.should().exist(packageJsonDependencies.package);
        }));
        it("can get added as a app package and removed from dev if it exists", () => __awaiter(this, void 0, void 0, function* () {
            const obj = new engineVariables_1.EngineVariables();
            peerDependencies.package = "^1.2.3";
            obj.enginePackageJson = { peerDependencies };
            obj.toggleClientPackage("package", "main.js", "main.min.js", false, "app", false, "**/*.css", true);
            obj.toggleDevDependency(["package"], true);
            obj.buildDependencies(uniteConfiguration, packageJsonDependencies);
            Chai.should().exist(uniteConfiguration.clientPackages.package);
            Chai.should().exist(packageJsonDependencies.package);
            obj.buildDevDependencies(packageJsonDevDependencies);
            Chai.should().not.exist(packageJsonDevDependencies.package);
        }));
        it("can get added as a test package", () => __awaiter(this, void 0, void 0, function* () {
            const obj = new engineVariables_1.EngineVariables();
            peerDependencies.package = "^1.2.3";
            obj.enginePackageJson = { peerDependencies };
            obj.toggleClientPackage("package", "main.js", "main.min.js", false, "test", false, "**/*.css", true);
            obj.buildDependencies(uniteConfiguration, packageJsonDependencies);
            Chai.should().exist(uniteConfiguration.clientPackages.package);
            Chai.should().not.exist(packageJsonDependencies.package);
            obj.buildDevDependencies(packageJsonDevDependencies);
            Chai.should().exist(packageJsonDevDependencies.package);
        }));
    });
    describe("buildDevDependencies", () => {
        it("can get removed from existing dependencies", () => __awaiter(this, void 0, void 0, function* () {
            const obj = new engineVariables_1.EngineVariables();
            peerDependencies.package = "^1.2.3";
            obj.enginePackageJson = { peerDependencies };
            obj.toggleDevDependency(["package"], false);
            packageJsonDevDependencies.package = "blah";
            obj.buildDevDependencies(packageJsonDevDependencies);
            Chai.should().not.exist(packageJsonDevDependencies.package);
        }));
    });
});

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3Rlc3QvdW5pdC9zcmMvZW5naW5lL2VuZ2luZVZhcmlhYmxlcy5zcGVjLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQTs7R0FFRztBQUNILDZCQUE2QjtBQUM3Qix1R0FBb0c7QUFDcEcsNkVBQTBFO0FBRTFFLFFBQVEsQ0FBQyxpQkFBaUIsRUFBRTtJQUN4QixJQUFJLGtCQUFzQyxDQUFDO0lBQzNDLElBQUksdUJBQWlELENBQUM7SUFDdEQsSUFBSSwwQkFBb0QsQ0FBQztJQUN6RCxJQUFJLGdCQUEwQyxDQUFDO0lBRS9DLFVBQVUsQ0FBQztRQUNQLGtCQUFrQixHQUFHLElBQUksdUNBQWtCLEVBQUUsQ0FBQztRQUM5QyxrQkFBa0IsQ0FBQyxjQUFjLEdBQUcsRUFBRSxDQUFDO1FBQ3ZDLHVCQUF1QixHQUFHLEVBQUUsQ0FBQztRQUM3QiwwQkFBMEIsR0FBRyxFQUFFLENBQUM7UUFDaEMsZ0JBQWdCLEdBQUcsRUFBRSxDQUFDO0lBQzFCLENBQUMsQ0FBQyxDQUFDO0lBRUgsRUFBRSxDQUFDLGdCQUFnQixFQUFFO1FBQ2pCLE1BQU0sR0FBRyxHQUFHLElBQUksaUNBQWUsRUFBRSxDQUFDO1FBQ2xDLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDN0IsQ0FBQyxDQUFBLENBQUMsQ0FBQztJQUVILFFBQVEsQ0FBQyxxQkFBcUIsRUFBRTtRQUM1QixFQUFFLENBQUMsOENBQThDLEVBQUU7WUFDL0MsTUFBTSxHQUFHLEdBQUcsSUFBSSxpQ0FBZSxFQUFFLENBQUM7WUFDbEMsSUFBSSxDQUFDO2dCQUNELEdBQUcsQ0FBQyxtQkFBbUIsQ0FBQyxTQUFTLEVBQUUsU0FBUyxFQUFFLGFBQWEsRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQUUsSUFBSSxDQUFDLENBQUM7WUFDdkcsQ0FBQztZQUFDLEtBQUssQ0FBQyxDQUFDLEdBQUcsQ0FB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QixDQUFDLE9BQU8sR0FBRyxRQUFRLENBQUM7WUFDcEMsR0FBRyxDQUFDLGlCQUFpQixHQUFRLEVBQUUsZ0JBQWdCLEVBQUUsQ0FBQztZQUNsRCxHQUFHLENBQUMsbUJBQW1CLENBQUMsQ0FBQyxTQUFTLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQztZQUM1QywwQkFBMEIsQ0FBQyxPQUFPLEdBQUcsTUFBTSxDQUFDO1lBQzVDLEdBQUcsQ0FBQyxvQkFBb0IsQ0FBQywwQkFBMEIsQ0FBQyxDQUFDO1lBQ3JELElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLDBCQUEwQixDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ2hFLENBQUMsQ0FBQSxDQUFDLENBQUM7SUFDUCxDQUFDLENBQUMsQ0FBQztBQUNQLENBQUMsQ0FBQyxDQUFDIiwiZmlsZSI6ImVuZ2luZS9lbmdpbmVWYXJpYWJsZXMuc3BlYy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogVGVzdHMgZm9yIEVuZ2luZVZhcmlhYmxlcy5cbiAqL1xuaW1wb3J0ICogYXMgQ2hhaSBmcm9tIFwiY2hhaVwiO1xuaW1wb3J0IHsgVW5pdGVDb25maWd1cmF0aW9uIH0gZnJvbSBcIi4uLy4uLy4uLy4uL2Rpc3QvY29uZmlndXJhdGlvbi9tb2RlbHMvdW5pdGUvdW5pdGVDb25maWd1cmF0aW9uXCI7XG5pbXBvcnQgeyBFbmdpbmVWYXJpYWJsZXMgfSBmcm9tIFwiLi4vLi4vLi4vLi4vZGlzdC9lbmdpbmUvZW5naW5lVmFyaWFibGVzXCI7XG5cbmRlc2NyaWJlKFwiRW5naW5lVmFyaWFibGVzXCIsICgpID0+IHtcbiAgICBsZXQgdW5pdGVDb25maWd1cmF0aW9uOiBVbml0ZUNvbmZpZ3VyYXRpb247XG4gICAgbGV0IHBhY2thZ2VKc29uRGVwZW5kZW5jaWVzOiB7IFtpZDogc3RyaW5nXTogc3RyaW5nIH07XG4gICAgbGV0IHBhY2thZ2VKc29uRGV2RGVwZW5kZW5jaWVzOiB7IFtpZDogc3RyaW5nXTogc3RyaW5nIH07XG4gICAgbGV0IHBlZXJEZXBlbmRlbmNpZXM6IHsgW2lkOiBzdHJpbmddOiBzdHJpbmcgfTtcblxuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgICAgICB1bml0ZUNvbmZpZ3VyYXRpb24gPSBuZXcgVW5pdGVDb25maWd1cmF0aW9uKCk7XG4gICAgICAgIHVuaXRlQ29uZmlndXJhdGlvbi5jbGllbnRQYWNrYWdlcyA9IHt9O1xuICAgICAgICBwYWNrYWdlSnNvbkRlcGVuZGVuY2llcyA9IHt9O1xuICAgICAgICBwYWNrYWdlSnNvbkRldkRlcGVuZGVuY2llcyA9IHt9O1xuICAgICAgICBwZWVyRGVwZW5kZW5jaWVzID0ge307XG4gICAgfSk7XG5cbiAgICBpdChcImNhbiBiZSBjcmVhdGVkXCIsIGFzeW5jKCkgPT4ge1xuICAgICAgICBjb25zdCBvYmogPSBuZXcgRW5naW5lVmFyaWFibGVzKCk7XG4gICAgICAgIENoYWkuc2hvdWxkKCkuZXhpc3Qob2JqKTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKFwidG9nZ2xlQ2xpZW50UGFja2FnZVwiLCAoKSA9PiB7XG4gICAgICAgIGl0KFwiY2FuIGZhaWwgd2hlbiB0aGVyZSBhcmUgbm8gcGVlciBkZXBlbmRlbmNpZXNcIiwgYXN5bmMoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBvYmogPSBuZXcgRW5naW5lVmFyaWFibGVzKCk7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIG9iai50b2dnbGVDbGllbnRQYWNrYWdlKFwicGFja2FnZVwiLCBcIm1haW4uanNcIiwgXCJtYWluLm1pbi5qc1wiLCBmYWxzZSwgXCJhcHBcIiwgZmFsc2UsIHVuZGVmaW5lZCwgdHJ1ZSk7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBDaGFpLmV4cGVjdChlcnIubWVzc2FnZSkudG8uY29udGFpbihcIm1pc3NpbmdcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KFwiY2FuIGZhaWwgd2hlbiBwZWVyIGRlcGVuZGVuY2llcyBkb2VzIG5vdCBjb250YWluIHBhY2thZ2VcIiwgYXN5bmMoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBvYmogPSBuZXcgRW5naW5lVmFyaWFibGVzKCk7XG4gICAgICAgICAgICBvYmouZW5naW5lUGFja2FnZUpzb24gPSA8YW55PnsgcGVlckRlcGVuZGVuY2llcyB9O1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBvYmoudG9nZ2xlQ2xpZW50UGFja2FnZShcInBhY2thZ2VcIiwgXCJtYWluLmpzXCIsIFwibWFpbi5taW4uanNcIiwgZmFsc2UsIFwiYXBwXCIsIGZhbHNlLCB1bmRlZmluZWQsIHRydWUpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgQ2hhaS5leHBlY3QoZXJyLm1lc3NhZ2UpLnRvLmNvbnRhaW4oXCJNaXNzaW5nXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBpdChcImNhbiBnZXQgYWRkZWQgYXMgYSBkZXBlbmRlbmN5IGNvbnRhaW4gcGFja2FnZVwiLCBhc3luYygpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG9iaiA9IG5ldyBFbmdpbmVWYXJpYWJsZXMoKTtcbiAgICAgICAgICAgIHBlZXJEZXBlbmRlbmNpZXMucGFja2FnZSA9IFwiXjEuMi4zXCI7XG4gICAgICAgICAgICBvYmouZW5naW5lUGFja2FnZUpzb24gPSA8YW55PnsgcGVlckRlcGVuZGVuY2llcyB9O1xuICAgICAgICAgICAgb2JqLnRvZ2dsZUNsaWVudFBhY2thZ2UoXCJwYWNrYWdlXCIsIFwibWFpbi5qc1wiLCBcIm1haW4ubWluLmpzXCIsIGZhbHNlLCBcImFwcFwiLCBmYWxzZSwgXCIqKi8qLmNzc1wiLCB0cnVlKTtcbiAgICAgICAgICAgIG9iai5idWlsZERlcGVuZGVuY2llcyh1bml0ZUNvbmZpZ3VyYXRpb24sIHBhY2thZ2VKc29uRGVwZW5kZW5jaWVzKTtcbiAgICAgICAgICAgIENoYWkuc2hvdWxkKCkuZXhpc3QodW5pdGVDb25maWd1cmF0aW9uLmNsaWVudFBhY2thZ2VzLnBhY2thZ2UpO1xuICAgICAgICAgICAgQ2hhaS5zaG91bGQoKS5leGlzdChwYWNrYWdlSnNvbkRlcGVuZGVuY2llcy5wYWNrYWdlKTtcbiAgICAgICAgICAgIENoYWkuZXhwZWN0KHVuaXRlQ29uZmlndXJhdGlvbi5jbGllbnRQYWNrYWdlcy5wYWNrYWdlLm1haW4pLnRvLmJlLmVxdWFsKFwibWFpbi5qc1wiKTtcbiAgICAgICAgICAgIENoYWkuZXhwZWN0KHVuaXRlQ29uZmlndXJhdGlvbi5jbGllbnRQYWNrYWdlcy5wYWNrYWdlLm1haW5NaW5pZmllZCkudG8uYmUuZXF1YWwoXCJtYWluLm1pbi5qc1wiKTtcbiAgICAgICAgICAgIENoYWkuZXhwZWN0KHVuaXRlQ29uZmlndXJhdGlvbi5jbGllbnRQYWNrYWdlcy5wYWNrYWdlLmluY2x1ZGVNb2RlKS50by5iZS5lcXVhbChcImFwcFwiKTtcbiAgICAgICAgICAgIENoYWkuZXhwZWN0KHVuaXRlQ29uZmlndXJhdGlvbi5jbGllbnRQYWNrYWdlcy5wYWNrYWdlLnZlcnNpb24pLnRvLmJlLmVxdWFsKFwiXjEuMi4zXCIpO1xuICAgICAgICAgICAgQ2hhaS5leHBlY3QodW5pdGVDb25maWd1cmF0aW9uLmNsaWVudFBhY2thZ2VzLnBhY2thZ2UucHJlbG9hZCkudG8uYmUuZXF1YWwoZmFsc2UpO1xuICAgICAgICAgICAgQ2hhaS5leHBlY3QodW5pdGVDb25maWd1cmF0aW9uLmNsaWVudFBhY2thZ2VzLnBhY2thZ2UuaXNQYWNrYWdlKS50by5iZS5lcXVhbChmYWxzZSk7XG4gICAgICAgICAgICBDaGFpLmV4cGVjdCh1bml0ZUNvbmZpZ3VyYXRpb24uY2xpZW50UGFja2FnZXMucGFja2FnZS5hc3NldHMpLnRvLmJlLmVxdWFsKFwiKiovKi5jc3NcIik7XG4gICAgICAgICAgICBvYmouYnVpbGREZXZEZXBlbmRlbmNpZXMocGFja2FnZUpzb25EZXZEZXBlbmRlbmNpZXMpO1xuICAgICAgICAgICAgQ2hhaS5zaG91bGQoKS5ub3QuZXhpc3QocGFja2FnZUpzb25EZXZEZXBlbmRlbmNpZXMucGFja2FnZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KFwiY2FuIGdldCByZW1vdmVkIGFzIGEgZGVwZW5kZW5jeSBjb250YWluIHBhY2thZ2VcIiwgYXN5bmMoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBvYmogPSBuZXcgRW5naW5lVmFyaWFibGVzKCk7XG4gICAgICAgICAgICBwZWVyRGVwZW5kZW5jaWVzLnBhY2thZ2UgPSBcIl4xLjIuM1wiO1xuICAgICAgICAgICAgb2JqLmVuZ2luZVBhY2thZ2VKc29uID0gPGFueT57IHBlZXJEZXBlbmRlbmNpZXMgfTtcbiAgICAgICAgICAgIG9iai50b2dnbGVDbGllbnRQYWNrYWdlKFwicGFja2FnZVwiLCBcIm1haW4uanNcIiwgXCJtYWluLm1pbi5qc1wiLCBmYWxzZSwgXCJhcHBcIiwgZmFsc2UsIFwiKiovKi5jc3NcIiwgZmFsc2UpO1xuICAgICAgICAgICAgb2JqLmJ1aWxkRGVwZW5kZW5jaWVzKHVuaXRlQ29uZmlndXJhdGlvbiwgcGFja2FnZUpzb25EZXBlbmRlbmNpZXMpO1xuICAgICAgICAgICAgQ2hhaS5zaG91bGQoKS5ub3QuZXhpc3QodW5pdGVDb25maWd1cmF0aW9uLmNsaWVudFBhY2thZ2VzLnBhY2thZ2UpO1xuICAgICAgICAgICAgQ2hhaS5zaG91bGQoKS5ub3QuZXhpc3QocGFja2FnZUpzb25EZXBlbmRlbmNpZXMucGFja2FnZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KFwiY2FuIGdldCBhZGRlZCBhbmQgcmVtb3ZlZCBhcyBhIGRlcGVuZGVuY3kgY29udGFpbiBwYWNrYWdlXCIsIGFzeW5jKCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgb2JqID0gbmV3IEVuZ2luZVZhcmlhYmxlcygpO1xuICAgICAgICAgICAgcGVlckRlcGVuZGVuY2llcy5wYWNrYWdlID0gXCJeMS4yLjNcIjtcbiAgICAgICAgICAgIG9iai5lbmdpbmVQYWNrYWdlSnNvbiA9IDxhbnk+eyBwZWVyRGVwZW5kZW5jaWVzIH07XG4gICAgICAgICAgICBvYmoudG9nZ2xlQ2xpZW50UGFja2FnZShcInBhY2thZ2VcIiwgXCJtYWluLmpzXCIsIFwibWFpbi5taW4uanNcIiwgZmFsc2UsIFwiYXBwXCIsIGZhbHNlLCBcIioqLyouY3NzXCIsIHRydWUpO1xuICAgICAgICAgICAgb2JqLnRvZ2dsZUNsaWVudFBhY2thZ2UoXCJwYWNrYWdlXCIsIFwibWFpbi5qc1wiLCBcIm1haW4ubWluLmpzXCIsIGZhbHNlLCBcImFwcFwiLCBmYWxzZSwgXCIqKi8qLmNzc1wiLCBmYWxzZSk7XG4gICAgICAgICAgICBvYmouYnVpbGREZXBlbmRlbmNpZXModW5pdGVDb25maWd1cmF0aW9uLCBwYWNrYWdlSnNvbkRlcGVuZGVuY2llcyk7XG4gICAgICAgICAgICBDaGFpLnNob3VsZCgpLmV4aXN0KHVuaXRlQ29uZmlndXJhdGlvbi5jbGllbnRQYWNrYWdlcy5wYWNrYWdlKTtcbiAgICAgICAgICAgIENoYWkuc2hvdWxkKCkuZXhpc3QocGFja2FnZUpzb25EZXBlbmRlbmNpZXMucGFja2FnZSk7XG4gICAgICAgICAgICBDaGFpLmV4cGVjdCh1bml0ZUNvbmZpZ3VyYXRpb24uY2xpZW50UGFja2FnZXMucGFja2FnZS5tYWluKS50by5iZS5lcXVhbChcIm1haW4uanNcIik7XG4gICAgICAgICAgICBDaGFpLmV4cGVjdCh1bml0ZUNvbmZpZ3VyYXRpb24uY2xpZW50UGFja2FnZXMucGFja2FnZS5tYWluTWluaWZpZWQpLnRvLmJlLmVxdWFsKFwibWFpbi5taW4uanNcIik7XG4gICAgICAgICAgICBDaGFpLmV4cGVjdCh1bml0ZUNvbmZpZ3VyYXRpb24uY2xpZW50UGFja2FnZXMucGFja2FnZS5pbmNsdWRlTW9kZSkudG8uYmUuZXF1YWwoXCJhcHBcIik7XG4gICAgICAgICAgICBDaGFpLmV4cGVjdCh1bml0ZUNvbmZpZ3VyYXRpb24uY2xpZW50UGFja2FnZXMucGFja2FnZS52ZXJzaW9uKS50by5iZS5lcXVhbChcIl4xLjIuM1wiKTtcbiAgICAgICAgICAgIENoYWkuZXhwZWN0KHVuaXRlQ29uZmlndXJhdGlvbi5jbGllbnRQYWNrYWdlcy5wYWNrYWdlLnByZWxvYWQpLnRvLmJlLmVxdWFsKGZhbHNlKTtcbiAgICAgICAgICAgIENoYWkuZXhwZWN0KHVuaXRlQ29uZmlndXJhdGlvbi5jbGllbnRQYWNrYWdlcy5wYWNrYWdlLmlzUGFja2FnZSkudG8uYmUuZXF1YWwoZmFsc2UpO1xuICAgICAgICAgICAgQ2hhaS5leHBlY3QodW5pdGVDb25maWd1cmF0aW9uLmNsaWVudFBhY2thZ2VzLnBhY2thZ2UuYXNzZXRzKS50by5iZS5lcXVhbChcIioqLyouY3NzXCIpO1xuICAgICAgICAgICAgb2JqLmJ1aWxkRGV2RGVwZW5kZW5jaWVzKHBhY2thZ2VKc29uRGV2RGVwZW5kZW5jaWVzKTtcbiAgICAgICAgICAgIENoYWkuc2hvdWxkKCkubm90LmV4aXN0KHBhY2thZ2VKc29uRGV2RGVwZW5kZW5jaWVzLnBhY2thZ2UpO1xuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKFwiZ2V0VGVzdENsaWVudFBhY2thZ2VzXCIsICgpID0+IHtcbiAgICAgICAgaXQoXCJjYW4gc3VjY2VlZCB3aGVuIHRoZXJlIGFyZSBubyB0ZXN0IGNsaWVudCBwYWNrYWdlc1wiLCBhc3luYygpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG9iaiA9IG5ldyBFbmdpbmVWYXJpYWJsZXMoKTtcbiAgICAgICAgICAgIGNvbnN0IHBhY2thZ2VzID0gb2JqLmdldFRlc3RDbGllbnRQYWNrYWdlcygpO1xuICAgICAgICAgICAgQ2hhaS5leHBlY3QoT2JqZWN0LmtleXMocGFja2FnZXMpLmxlbmd0aCkudG8uYmUuZXF1YWwoMCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KFwiY2FuIHN1Y2NlZWQgd2hlbiBhcHAgcGFja2FnZXMgaGF2ZSBiZWVuIGFkZGVkXCIsIGFzeW5jKCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgb2JqID0gbmV3IEVuZ2luZVZhcmlhYmxlcygpO1xuICAgICAgICAgICAgb2JqLmVuZ2luZVBhY2thZ2VKc29uID0gPGFueT57IHBlZXJEZXBlbmRlbmNpZXMgfTtcbiAgICAgICAgICAgIHBlZXJEZXBlbmRlbmNpZXMucGFja2FnZSA9IFwiXjEuMi4zXCI7XG4gICAgICAgICAgICBvYmoudG9nZ2xlQ2xpZW50UGFja2FnZShcInBhY2thZ2VcIiwgXCJtYWluLmpzXCIsIFwibWFpbi5taW4uanNcIiwgZmFsc2UsIFwiYXBwXCIsIGZhbHNlLCBcIioqLyouY3NzXCIsIHRydWUpO1xuICAgICAgICAgICAgY29uc3QgcGFja2FnZXMgPSBvYmouZ2V0VGVzdENsaWVudFBhY2thZ2VzKCk7XG4gICAgICAgICAgICBDaGFpLmV4cGVjdChPYmplY3Qua2V5cyhwYWNrYWdlcykubGVuZ3RoKS50by5iZS5lcXVhbCgwKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoXCJjYW4gc3VjY2VlZCB3aGVuIHRlc3QgcGFja2FnZXMgaGF2ZSBiZWVuIGFkZGVkXCIsIGFzeW5jKCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgb2JqID0gbmV3IEVuZ2luZVZhcmlhYmxlcygpO1xuICAgICAgICAgICAgb2JqLmVuZ2luZVBhY2thZ2VKc29uID0gPGFueT57IHBlZXJEZXBlbmRlbmNpZXMgfTtcbiAgICAgICAgICAgIHBlZXJEZXBlbmRlbmNpZXMucGFja2FnZSA9IFwiXjEuMi4zXCI7XG4gICAgICAgICAgICBvYmoudG9nZ2xlQ2xpZW50UGFja2FnZShcInBhY2thZ2VcIiwgXCJtYWluLmpzXCIsIFwibWFpbi5taW4uanNcIiwgZmFsc2UsIFwidGVzdFwiLCBmYWxzZSwgXCIqKi8qLmNzc1wiLCB0cnVlKTtcbiAgICAgICAgICAgIGNvbnN0IHBhY2thZ2VzID0gb2JqLmdldFRlc3RDbGllbnRQYWNrYWdlcygpO1xuICAgICAgICAgICAgQ2hhaS5leHBlY3QoT2JqZWN0LmtleXMocGFja2FnZXMpLmxlbmd0aCkudG8uYmUuZXF1YWwoMSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KFwiY2FuIHN1Y2NlZWQgd2hlbiBib3RoIHBhY2thZ2VzIGhhdmUgYmVlbiBhZGRlZFwiLCBhc3luYygpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG9iaiA9IG5ldyBFbmdpbmVWYXJpYWJsZXMoKTtcbiAgICAgICAgICAgIG9iai5lbmdpbmVQYWNrYWdlSnNvbiA9IDxhbnk+eyBwZWVyRGVwZW5kZW5jaWVzIH07XG4gICAgICAgICAgICBwZWVyRGVwZW5kZW5jaWVzLnBhY2thZ2UgPSBcIl4xLjIuM1wiO1xuICAgICAgICAgICAgb2JqLnRvZ2dsZUNsaWVudFBhY2thZ2UoXCJwYWNrYWdlXCIsIFwibWFpbi5qc1wiLCBcIm1haW4ubWluLmpzXCIsIGZhbHNlLCBcImJvdGhcIiwgZmFsc2UsIFwiKiovKi5jc3NcIiwgdHJ1ZSk7XG4gICAgICAgICAgICBjb25zdCBwYWNrYWdlcyA9IG9iai5nZXRUZXN0Q2xpZW50UGFja2FnZXMoKTtcbiAgICAgICAgICAgIENoYWkuZXhwZWN0KE9iamVjdC5rZXlzKHBhY2thZ2VzKS5sZW5ndGgpLnRvLmJlLmVxdWFsKDEpO1xuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKFwidG9nZ2xlRGV2RGVwZW5kZW5jeVwiLCAoKSA9PiB7XG4gICAgICAgIGl0KFwiY2FuIGZhaWwgd2hlbiB0aGVyZSBhcmUgbm8gcGVlciBkZXBlbmRlbmNpZXNcIiwgYXN5bmMoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBvYmogPSBuZXcgRW5naW5lVmFyaWFibGVzKCk7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIG9iai50b2dnbGVEZXZEZXBlbmRlbmN5KFtcInBhY2thZ2VcIl0sIHRydWUpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgQ2hhaS5leHBlY3QoZXJyLm1lc3NhZ2UpLnRvLmNvbnRhaW4oXCJtaXNzaW5nXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBpdChcImNhbiBmYWlsIHdoZW4gcGVlciBkZXBlbmRlbmNpZXMgZG9lcyBub3QgY29udGFpbiBwYWNrYWdlXCIsIGFzeW5jKCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgb2JqID0gbmV3IEVuZ2luZVZhcmlhYmxlcygpO1xuICAgICAgICAgICAgb2JqLmVuZ2luZVBhY2thZ2VKc29uID0gPGFueT57IHBlZXJEZXBlbmRlbmNpZXMgfTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgb2JqLnRvZ2dsZURldkRlcGVuZGVuY3koW1wicGFja2FnZVwiXSwgdHJ1ZSk7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBDaGFpLmV4cGVjdChlcnIubWVzc2FnZSkudG8uY29udGFpbihcIk1pc3NpbmdcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KFwiY2FuIHN1Y2NlZWQgd2hlbiBhZGRpbmcgYSBkZXYgZGVwZW5kZW5jeVwiLCBhc3luYygpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG9iaiA9IG5ldyBFbmdpbmVWYXJpYWJsZXMoKTtcbiAgICAgICAgICAgIHBlZXJEZXBlbmRlbmNpZXMucGFja2FnZSA9IFwiXjEuMi4zXCI7XG4gICAgICAgICAgICBvYmouZW5naW5lUGFja2FnZUpzb24gPSA8YW55PnsgcGVlckRlcGVuZGVuY2llcyB9O1xuICAgICAgICAgICAgb2JqLnRvZ2dsZURldkRlcGVuZGVuY3koW1wicGFja2FnZVwiXSwgdHJ1ZSk7XG4gICAgICAgICAgICBvYmouYnVpbGREZXZEZXBlbmRlbmNpZXMocGFja2FnZUpzb25EZXZEZXBlbmRlbmNpZXMpO1xuICAgICAgICAgICAgQ2hhaS5zaG91bGQoKS5leGlzdChwYWNrYWdlSnNvbkRldkRlcGVuZGVuY2llcy5wYWNrYWdlKTtcbiAgICAgICAgICAgIG9iai5idWlsZERlcGVuZGVuY2llcyh1bml0ZUNvbmZpZ3VyYXRpb24sIHBhY2thZ2VKc29uRGVwZW5kZW5jaWVzKTtcbiAgICAgICAgICAgIENoYWkuc2hvdWxkKCkubm90LmV4aXN0KHVuaXRlQ29uZmlndXJhdGlvbi5jbGllbnRQYWNrYWdlcy5wYWNrYWdlKTtcbiAgICAgICAgICAgIENoYWkuc2hvdWxkKCkubm90LmV4aXN0KHBhY2thZ2VKc29uRGVwZW5kZW5jaWVzLnBhY2thZ2UpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdChcImNhbiBzdWNjZWVkIHdoZW4gYWRkaW5nIGEgZGV2IGRlcGVuZGVuY3kgdHdpY2VcIiwgYXN5bmMoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBvYmogPSBuZXcgRW5naW5lVmFyaWFibGVzKCk7XG4gICAgICAgICAgICBwZWVyRGVwZW5kZW5jaWVzLnBhY2thZ2UgPSBcIl4xLjIuM1wiO1xuICAgICAgICAgICAgb2JqLmVuZ2luZVBhY2thZ2VKc29uID0gPGFueT57IHBlZXJEZXBlbmRlbmNpZXMgfTtcbiAgICAgICAgICAgIG9iai50b2dnbGVEZXZEZXBlbmRlbmN5KFtcInBhY2thZ2VcIl0sIHRydWUpO1xuICAgICAgICAgICAgb2JqLnRvZ2dsZURldkRlcGVuZGVuY3koW1wicGFja2FnZVwiXSwgdHJ1ZSk7XG4gICAgICAgICAgICBvYmouYnVpbGREZXZEZXBlbmRlbmNpZXMocGFja2FnZUpzb25EZXZEZXBlbmRlbmNpZXMpO1xuICAgICAgICAgICAgQ2hhaS5zaG91bGQoKS5leGlzdChwYWNrYWdlSnNvbkRldkRlcGVuZGVuY2llcy5wYWNrYWdlKTtcbiAgICAgICAgICAgIG9iai5idWlsZERlcGVuZGVuY2llcyh1bml0ZUNvbmZpZ3VyYXRpb24sIHBhY2thZ2VKc29uRGVwZW5kZW5jaWVzKTtcbiAgICAgICAgICAgIENoYWkuc2hvdWxkKCkubm90LmV4aXN0KHVuaXRlQ29uZmlndXJhdGlvbi5jbGllbnRQYWNrYWdlcy5wYWNrYWdlKTtcbiAgICAgICAgICAgIENoYWkuc2hvdWxkKCkubm90LmV4aXN0KHBhY2thZ2VKc29uRGVwZW5kZW5jaWVzLnBhY2thZ2UpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdChcImNhbiBzdWNjZWVkIHdoZW4gcmVtb3ZpbmcgYSBkZXYgZGVwZW5kZW5jeVwiLCBhc3luYygpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG9iaiA9IG5ldyBFbmdpbmVWYXJpYWJsZXMoKTtcbiAgICAgICAgICAgIHBlZXJEZXBlbmRlbmNpZXMucGFja2FnZSA9IFwiXjEuMi4zXCI7XG4gICAgICAgICAgICBvYmouZW5naW5lUGFja2FnZUpzb24gPSA8YW55PnsgcGVlckRlcGVuZGVuY2llcyB9O1xuICAgICAgICAgICAgb2JqLnRvZ2dsZURldkRlcGVuZGVuY3koW1wicGFja2FnZVwiXSwgZmFsc2UpO1xuICAgICAgICAgICAgb2JqLmJ1aWxkRGV2RGVwZW5kZW5jaWVzKHBhY2thZ2VKc29uRGV2RGVwZW5kZW5jaWVzKTtcbiAgICAgICAgICAgIENoYWkuc2hvdWxkKCkubm90LmV4aXN0KHBhY2thZ2VKc29uRGV2RGVwZW5kZW5jaWVzLnBhY2thZ2UpO1xuICAgICAgICAgICAgb2JqLmJ1aWxkRGVwZW5kZW5jaWVzKHVuaXRlQ29uZmlndXJhdGlvbiwgcGFja2FnZUpzb25EZXBlbmRlbmNpZXMpO1xuICAgICAgICAgICAgQ2hhaS5zaG91bGQoKS5ub3QuZXhpc3QodW5pdGVDb25maWd1cmF0aW9uLmNsaWVudFBhY2thZ2VzLnBhY2thZ2UpO1xuICAgICAgICAgICAgQ2hhaS5zaG91bGQoKS5ub3QuZXhpc3QocGFja2FnZUpzb25EZXBlbmRlbmNpZXMucGFja2FnZSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoXCJidWlsZERlcGVuZGVuY2llc1wiLCAoKSA9PiB7XG4gICAgICAgIGl0KFwiY2FuIGdldCByZW1vdmVkIGZyb20gZXhpc3RpbmcgZGVwZW5kZW5jaWVzXCIsIGFzeW5jKCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgb2JqID0gbmV3IEVuZ2luZVZhcmlhYmxlcygpO1xuICAgICAgICAgICAgcGVlckRlcGVuZGVuY2llcy5wYWNrYWdlID0gXCJeMS4yLjNcIjtcbiAgICAgICAgICAgIG9iai5lbmdpbmVQYWNrYWdlSnNvbiA9IDxhbnk+eyBwZWVyRGVwZW5kZW5jaWVzIH07XG4gICAgICAgICAgICBvYmoudG9nZ2xlQ2xpZW50UGFja2FnZShcInBhY2thZ2VcIiwgXCJtYWluLmpzXCIsIFwibWFpbi5taW4uanNcIiwgZmFsc2UsIFwiYXBwXCIsIGZhbHNlLCBcIioqLyouY3NzXCIsIGZhbHNlKTtcbiAgICAgICAgICAgIHBhY2thZ2VKc29uRGVwZW5kZW5jaWVzLnBhY2thZ2UgPSBcImJsYWhcIjtcbiAgICAgICAgICAgIG9iai5idWlsZERlcGVuZGVuY2llcyh1bml0ZUNvbmZpZ3VyYXRpb24sIHBhY2thZ2VKc29uRGVwZW5kZW5jaWVzKTtcbiAgICAgICAgICAgIENoYWkuc2hvdWxkKCkubm90LmV4aXN0KHBhY2thZ2VKc29uRGVwZW5kZW5jaWVzLnBhY2thZ2UpO1xuICAgICAgICB9KTtcbiAgICAgICAgaXQoXCJjYW4gZ2V0IGFkZGVkIGFzIGEgYXBwIHBhY2thZ2VcIiwgYXN5bmMoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBvYmogPSBuZXcgRW5naW5lVmFyaWFibGVzKCk7XG4gICAgICAgICAgICBwZWVyRGVwZW5kZW5jaWVzLnBhY2thZ2UgPSBcIl4xLjIuM1wiO1xuICAgICAgICAgICAgb2JqLmVuZ2luZVBhY2thZ2VKc29uID0gPGFueT57IHBlZXJEZXBlbmRlbmNpZXMgfTtcbiAgICAgICAgICAgIG9iai50b2dnbGVDbGllbnRQYWNrYWdlKFwicGFja2FnZVwiLCBcIm1haW4uanNcIiwgXCJtYWluLm1pbi5qc1wiLCBmYWxzZSwgXCJhcHBcIiwgZmFsc2UsIFwiKiovKi5jc3NcIiwgdHJ1ZSk7XG4gICAgICAgICAgICBvYmouYnVpbGREZXBlbmRlbmNpZXModW5pdGVDb25maWd1cmF0aW9uLCBwYWNrYWdlSnNvbkRlcGVuZGVuY2llcyk7XG4gICAgICAgICAgICBDaGFpLnNob3VsZCgpLmV4aXN0KHVuaXRlQ29uZmlndXJhdGlvbi5jbGllbnRQYWNrYWdlcy5wYWNrYWdlKTtcbiAgICAgICAgICAgIENoYWkuc2hvdWxkKCkuZXhpc3QocGFja2FnZUpzb25EZXBlbmRlbmNpZXMucGFja2FnZSk7XG4gICAgICAgIH0pO1xuICAgICAgICBpdChcImNhbiBnZXQgYWRkZWQgYXMgYSBhcHAgcGFja2FnZSBhbmQgcmVtb3ZlZCBmcm9tIGRldiBpZiBpdCBleGlzdHNcIiwgYXN5bmMoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBvYmogPSBuZXcgRW5naW5lVmFyaWFibGVzKCk7XG4gICAgICAgICAgICBwZWVyRGVwZW5kZW5jaWVzLnBhY2thZ2UgPSBcIl4xLjIuM1wiO1xuICAgICAgICAgICAgb2JqLmVuZ2luZVBhY2thZ2VKc29uID0gPGFueT57IHBlZXJEZXBlbmRlbmNpZXMgfTtcbiAgICAgICAgICAgIG9iai50b2dnbGVDbGllbnRQYWNrYWdlKFwicGFja2FnZVwiLCBcIm1haW4uanNcIiwgXCJtYWluLm1pbi5qc1wiLCBmYWxzZSwgXCJhcHBcIiwgZmFsc2UsIFwiKiovKi5jc3NcIiwgdHJ1ZSk7XG4gICAgICAgICAgICBvYmoudG9nZ2xlRGV2RGVwZW5kZW5jeShbXCJwYWNrYWdlXCJdLCB0cnVlKTtcbiAgICAgICAgICAgIG9iai5idWlsZERlcGVuZGVuY2llcyh1bml0ZUNvbmZpZ3VyYXRpb24sIHBhY2thZ2VKc29uRGVwZW5kZW5jaWVzKTtcbiAgICAgICAgICAgIENoYWkuc2hvdWxkKCkuZXhpc3QodW5pdGVDb25maWd1cmF0aW9uLmNsaWVudFBhY2thZ2VzLnBhY2thZ2UpO1xuICAgICAgICAgICAgQ2hhaS5zaG91bGQoKS5leGlzdChwYWNrYWdlSnNvbkRlcGVuZGVuY2llcy5wYWNrYWdlKTtcbiAgICAgICAgICAgIG9iai5idWlsZERldkRlcGVuZGVuY2llcyhwYWNrYWdlSnNvbkRldkRlcGVuZGVuY2llcyk7XG4gICAgICAgICAgICBDaGFpLnNob3VsZCgpLm5vdC5leGlzdChwYWNrYWdlSnNvbkRldkRlcGVuZGVuY2llcy5wYWNrYWdlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGl0KFwiY2FuIGdldCBhZGRlZCBhcyBhIHRlc3QgcGFja2FnZVwiLCBhc3luYygpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG9iaiA9IG5ldyBFbmdpbmVWYXJpYWJsZXMoKTtcbiAgICAgICAgICAgIHBlZXJEZXBlbmRlbmNpZXMucGFja2FnZSA9IFwiXjEuMi4zXCI7XG4gICAgICAgICAgICBvYmouZW5naW5lUGFja2FnZUpzb24gPSA8YW55PnsgcGVlckRlcGVuZGVuY2llcyB9O1xuICAgICAgICAgICAgb2JqLnRvZ2dsZUNsaWVudFBhY2thZ2UoXCJwYWNrYWdlXCIsIFwibWFpbi5qc1wiLCBcIm1haW4ubWluLmpzXCIsIGZhbHNlLCBcInRlc3RcIiwgZmFsc2UsIFwiKiovKi5jc3NcIiwgdHJ1ZSk7XG4gICAgICAgICAgICBvYmouYnVpbGREZXBlbmRlbmNpZXModW5pdGVDb25maWd1cmF0aW9uLCBwYWNrYWdlSnNvbkRlcGVuZGVuY2llcyk7XG4gICAgICAgICAgICBDaGFpLnNob3VsZCgpLmV4aXN0KHVuaXRlQ29uZmlndXJhdGlvbi5jbGllbnRQYWNrYWdlcy5wYWNrYWdlKTtcbiAgICAgICAgICAgIENoYWkuc2hvdWxkKCkubm90LmV4aXN0KHBhY2thZ2VKc29uRGVwZW5kZW5jaWVzLnBhY2thZ2UpO1xuICAgICAgICAgICAgb2JqLmJ1aWxkRGV2RGVwZW5kZW5jaWVzKHBhY2thZ2VKc29uRGV2RGVwZW5kZW5jaWVzKTtcbiAgICAgICAgICAgIENoYWkuc2hvdWxkKCkuZXhpc3QocGFja2FnZUpzb25EZXZEZXBlbmRlbmNpZXMucGFja2FnZSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoXCJidWlsZERldkRlcGVuZGVuY2llc1wiLCAoKSA9PiB7XG4gICAgICAgIGl0KFwiY2FuIGdldCByZW1vdmVkIGZyb20gZXhpc3RpbmcgZGVwZW5kZW5jaWVzXCIsIGFzeW5jKCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgb2JqID0gbmV3IEVuZ2luZVZhcmlhYmxlcygpO1xuICAgICAgICAgICAgcGVlckRlcGVuZGVuY2llcy5wYWNrYWdlID0gXCJeMS4yLjNcIjtcbiAgICAgICAgICAgIG9iai5lbmdpbmVQYWNrYWdlSnNvbiA9IDxhbnk+eyBwZWVyRGVwZW5kZW5jaWVzIH07XG4gICAgICAgICAgICBvYmoudG9nZ2xlRGV2RGVwZW5kZW5jeShbXCJwYWNrYWdlXCJdLCBmYWxzZSk7XG4gICAgICAgICAgICBwYWNrYWdlSnNvbkRldkRlcGVuZGVuY2llcy5wYWNrYWdlID0gXCJibGFoXCI7XG4gICAgICAgICAgICBvYmouYnVpbGREZXZEZXBlbmRlbmNpZXMocGFja2FnZUpzb25EZXZEZXBlbmRlbmNpZXMpO1xuICAgICAgICAgICAgQ2hhaS5zaG91bGQoKS5ub3QuZXhpc3QocGFja2FnZUpzb25EZXZEZXBlbmRlbmNpZXMucGFja2FnZSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufSk7XG4iXX0=
